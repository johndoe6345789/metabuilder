# TESTING PACKAGES - DETAILED MATRIX
Date: 2026-01-23

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROJECT TESTING LIBRARY MATRIX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Package                              â”‚ Framework  â”‚ Version   â”‚ @testing-library/react    â”‚ @testing-library/jest-dom
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
dbal/development                     â”‚ vitest     â”‚ ^4.0.16   â”‚ [missing]                â”‚ [missing]
emailclient                          â”‚ jest       â”‚ [no ver]  â”‚ [missing]                â”‚ [missing]
frontends/nextjs                     â”‚ vitest     â”‚ ^4.0.16   â”‚ ^16.3.1                  â”‚ ^10.4.1 (dom only)
codegen                              â”‚ vitest     â”‚ [no ver]  â”‚ [missing]                â”‚ [missing]
codegen/packages/spark-tools         â”‚ vitest     â”‚ ^3.0.9    â”‚ ^16.0.1                  â”‚ ^6.6.3
workflowui                           â”‚ jest       â”‚ ^29.7.0   â”‚ ^16.3.1                  â”‚ ^6.6.3
pastebin                             â”‚ jest       â”‚ ^29.7.0   â”‚ ^14.1.2 [OUTDATED]        â”‚ ^6.1.5 [OUTDATED]
workflow                             â”‚ jest       â”‚ ^29.0.0   â”‚ [missing]                â”‚ [missing]
postgres                             â”‚ vitest     â”‚ ^4.0.15   â”‚ [missing]                â”‚ [missing]
redux/hooks                          â”‚ jest       â”‚ [no ver]  â”‚ [missing]                â”‚ [missing]
redux/hooks-async                    â”‚ jest       â”‚ ^29.7.0   â”‚ ^14.1.2 [OUTDATED]        â”‚ [missing]
redux/api-clients                    â”‚ jest       â”‚ [no ver]  â”‚ [missing]                â”‚ [missing]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SUMMARY STATISTICS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Total Packages: 13

By Framework:
  Jest:   7 packages (emailclient, workflowui, pastebin, workflow, redux/hooks, redux/hooks-async, redux/api-clients)
  Vitest: 6 packages (dbal, frontends/nextjs, codegen, codegen/spark-tools, postgres)

By @testing-library/react Version:
  v14.1.2:  2 packages (pastebin, redux/hooks-async) [OUTDATED]
  v16.0.1:  1 package  (codegen/spark-tools)
  v16.3.1:  2 packages (frontends/nextjs, workflowui)
  Missing:  8 packages (need declaration)

By @testing-library/jest-dom Version:
  v6.1.5:   1 package  (pastebin) [OUTDATED]
  v6.6.3:   2 packages (codegen/spark-tools, workflowui)
  v10.4.1:  1 package  (frontends/nextjs only for dom)
  Missing:  9 packages (need declaration)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ISSUES BY SEVERITY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”´ CRITICAL (Block npm/build)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Issue: 2 major version gap in @testing-library/react (v14 â†’ v16)
  Packages:
    â€¢ pastebin (v14.1.2 needs â†’ v16.3.1)
    â€¢ redux/hooks-async (v14.1.2 needs â†’ v16.3.1)
  Cause: Likely manual/legacy updates
  Impact: Different query APIs, incompatible test code
  Action: Immediate upgrade required

  Issue: Jest vs Vitest duplication (2 frameworks)
  Framework split:
    â€¢ Jest: 7 packages
    â€¢ Vitest: 6 packages
  Impact: Inconsistent testing experience, different configurations
  Action: Standardize on ONE framework (recommend Jest)

ğŸŸ¡ HIGH PRIORITY (Should fix in next sprint)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Issue: Missing testing library declarations (8 packages)
  Packages missing @testing-library/react:
    â€¢ dbal/development (vitest ^4.0.16)
    â€¢ emailclient (jest no version)
    â€¢ codegen (vitest no version)
    â€¢ workflow (jest ^29.0.0)
    â€¢ postgres (vitest ^4.0.15)
    â€¢ redux/hooks (jest no version)
    â€¢ redux/api-clients (jest no version)
  Impact: Tests may fail, no DOM testing utilities
  Action: Add explicit declarations

  Issue: Vitest version inconsistency
  Package:
    â€¢ codegen/packages/spark-tools @^3.0.9 (should be ^4.0.16)
  Impact: Different vitest behavior, may not work with other v4 packages
  Action: Upgrade to ^4.0.16

ğŸŸ  MEDIUM PRIORITY (Good to have)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Issue: Jest version inconsistency
  Package:
    â€¢ workflow @^29.0.0 (should be ^29.7.0)
  Impact: May miss security patches, inconsistent with workflowui/pastebin
  Action: Upgrade to ^29.7.0

  Issue: @testing-library/jest-dom version gap
  Package:
    â€¢ pastebin @^6.1.5 (should be ^6.6.3)
  Impact: Missing 5 minor releases of matchers/fixes
  Action: Upgrade to ^6.6.3

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RECOMMENDED STANDARDIZATION PLAN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OPTION A: STANDARDIZE ON JEST (Recommended) [3-4 hours]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Standard Package Versions:
  jest:                        ^29.7.0
  @testing-library/react:      ^16.3.1
  @testing-library/dom:        ^10.4.1
  @testing-library/jest-dom:   ^6.6.3
  @testing-library/user-event: ^14.5.1

Migrate (vitest â†’ jest) [4 packages]:
  1. dbal/development         (vitest ^4.0.16 â†’ jest ^29.7.0)
  2. frontends/nextjs         (vitest ^4.0.16 â†’ jest ^29.7.0)
  3. postgres                 (vitest ^4.0.15 â†’ jest ^29.7.0)
  4. codegen/packages/spark-tools (vitest ^3.0.9 â†’ jest ^29.7.0)

Upgrade (testing-library versions) [3 packages]:
  1. pastebin                 (upgrade all @testing-library/*)
  2. redux/hooks-async        (@testing-library/react v14 â†’ v16)
  3. workflow                 (jest v29.0.0 â†’ v29.7.0)

Add Declarations [4 packages]:
  1. emailclient              (add @testing-library/react, jest-dom)
  2. redux/hooks              (add @testing-library/react, jest-dom)
  3. redux/api-clients        (add @testing-library/react, jest-dom)
  4. codegen                  (add @testing-library/react, jest-dom)

Delete:
  â€¢ config/test/vitest.config.ts
  â€¢ frontends/nextjs/vitest.config.ts
  â€¢ postgres/vitest.config.mts
  â€¢ postgres/.storybook/vitest.config.mts

Update Scripts:
  â€¢ All "test": "vitest" â†’ "test": "jest"
  â€¢ All "test:watch": "vitest" â†’ "test:watch": "jest --watch"

Verify:
  â€¢ npm install (from project root)
  â€¢ npm run build
  â€¢ npm run test (should pass all)
  â€¢ npm run lint

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OPTION B: STANDARDIZE ON VITEST (Alternative) [4-5 hours]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

If vitest preferred:
  â€¢ Migrate all Jest packages â†’ vitest
  â€¢ Update all test scripts to "vitest"
  â€¢ Remove jest from all packages
  â€¢ Delete jest.config.ts files
  â€¢ NOTE: Still need @testing-library/jest-dom for matchers

Note: Jest is more stable/mature; vitest is newer/faster. Jest preferred for production.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PACKAGE-SPECIFIC ACTIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

dbal/development
  Current: vitest ^4.0.16, no testing-library
  Action:  Switch to jest ^29.7.0, add @testing-library/react + jest-dom
  
emailclient
  Current: jest [no version], no testing-library
  Action:  Specify jest ^29.7.0, add @testing-library/react + jest-dom

frontends/nextjs
  Current: vitest ^4.0.16, @testing-library/react ^16.3.1
  Action:  Switch to jest ^29.7.0, keep/add @testing-library/jest-dom
  Note:    Delete vitest.config.ts

codegen
  Current: vitest [no version], no testing-library
  Action:  Switch to jest ^29.7.0, add @testing-library/react + jest-dom

codegen/packages/spark-tools
  Current: vitest ^3.0.9, @testing-library/react ^16.0.1, jest-dom ^6.6.3
  Action:  Switch to jest ^29.7.0, upgrade @testing-library/react â†’ ^16.3.1

workflowui
  Current: jest ^29.7.0, @testing-library/react ^16.3.1 âœ…
  Action:  No change needed (already standard)
  Note:    Add @testing-library/jest-dom (has it) and @testing-library/user-event

pastebin
  Current: jest ^29.7.0, @testing-library/react ^14.1.2 (OUTDATED)
  Action:  Upgrade @testing-library/react â†’ ^16.3.1
  Action:  Upgrade @testing-library/jest-dom ^6.1.5 â†’ ^6.6.3
  Action:  Ensure @testing-library/user-event ^14.5.1 included

workflow
  Current: jest ^29.0.0, no testing-library
  Action:  Upgrade jest ^29.0.0 â†’ ^29.7.0
  Action:  Add @testing-library/react, @testing-library/jest-dom

postgres
  Current: vitest ^4.0.15, no testing-library
  Action:  Switch to jest ^29.7.0, add @testing-library/react + jest-dom
  Note:    Delete vitest.config.mts files

redux/hooks
  Current: jest [no version], no testing-library
  Action:  Specify jest ^29.7.0, add @testing-library/react + jest-dom

redux/hooks-async
  Current: jest ^29.7.0, @testing-library/react ^14.1.2 (OUTDATED)
  Action:  Upgrade @testing-library/react ^14.1.2 â†’ ^16.3.1
  Action:  Add @testing-library/jest-dom ^6.6.3

redux/api-clients
  Current: jest [no version], no testing-library
  Action:  Specify jest ^29.7.0, add @testing-library/react + jest-dom

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

IMPLEMENTATION NOTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. When migrating from vitest â†’ jest:
   â€¢ Copy jest.config.ts from existing jest project (e.g., workflowui)
   â€¢ Adjust paths as needed
   â€¢ Update test scripts in package.json
   â€¢ Run "npm install" to get jest deps

2. When upgrading @testing-library/react v14 â†’ v16:
   â€¢ API changes: Some query functions may differ
   â€¢ Run tests after upgrade to identify breaking changes
   â€¢ Consult @testing-library migration guide if issues

3. Verification after all changes:
   â€¢ npm install from project root (should succeed)
   â€¢ npm run build (check all workspaces build)
   â€¢ npm run test (run all test suites)
   â€¢ npm run lint (ensure no linting issues)

4. Version pinning:
   â€¢ Use ^ caret (^X.Y.Z) for all testing deps
   â€¢ Allows minor/patch updates, not major versions
   â€¢ Keep consistent across all packages

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

END OF MATRIX

For full audit details, see: TESTING_LIBRARIES_AUDIT_2026-01-23.txt

