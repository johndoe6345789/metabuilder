{
  "version":"2.2.0","name":"Import JSON Script","description":"Parse and import JSON Script from file","trigger":{"type":"http","method":"POST","path":"/json-editor/import"},"nodes":[{"id":"validate_context","type":"operation","op":"validate","input":"{{ $context.tenantId }}","validator":"required"},{"id":"check_permission","type":"operation","op":"condition","condition":"{{ $context.user.level >= 3 }}"},{"id":"parse_script","type":"operation","op":"transform_data","input":"{{ $json.fileContent }}","output":"{{ JSON.parse($json.fileContent) }}"},{"id":"validate_format","type":"operation","op":"condition","condition":"{{ $steps.parse_script.output.version === '2.2.0' }}"},{"id":"create_script","type":"operation","op":"database_create","entity":"JSONScript","data":{"tenantId":"{{ $context.tenantId }}","createdBy":"{{ $context.user.id }}","name":"{{ $json.name || 'Imported Script' }}","script":"{{ JSON.stringify($steps.parse_script.output) }}","createdAt":"{{ new Date().toISOString() }}"}},{"id":"return_success","type":"action","action":"http_response","status":201,"body":{"id":"{{ $steps.create_script.output.id }}","message":"Script imported"}}]
}
