{
  "$schema": "https://metabuilder.dev/schemas/package-playwright.schema.json",
  "package": "e2e_critical_flows",
  "version": "1.0.0",
  "description": "Critical user flows - proves all essential functionality works",
  "baseURL": "http://localhost:3000",
  "fixtures": {
    "testUser": {"email": "testuser@metabuilder.dev", "password": "TestPassword123!"},
    "adminUser": {"email": "admin@metabuilder.dev", "password": "AdminPassword123!"}
  },
  "tests": [
    {"name": "Flow 1.1: Hero page loads", "tags": ["@smoke", "@critical"], "steps": [{"action": "navigate", "url": "/"}, {"action": "waitForLoadState", "state": "domcontentloaded"}, {"action": "expect", "role": "heading", "assertion": {"matcher": "toBeVisible"}}, {"action": "expect", "role": "button", "text": "Get Started", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 1.2: Features visible", "tags": ["@smoke"], "steps": [{"action": "navigate", "url": "/"}, {"action": "waitForLoadState", "state": "networkidle"}, {"action": "expect", "testId": "features-section", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 1.3: Navigate to login", "tags": ["@smoke", "@critical"], "steps": [{"action": "navigate", "url": "/"}, {"action": "click", "role": "button", "text": "Get Started"}, {"action": "waitForNavigation"}, {"action": "expect", "assertion": {"matcher": "toHaveURL", "expected": "**/login"}}]},
    {"name": "Flow 2.1: Login page renders", "tags": ["@smoke", "@auth"], "steps": [{"action": "navigate", "url": "/login"}, {"action": "waitForLoadState", "state": "domcontentloaded"}, {"action": "expect", "role": "textbox", "assertion": {"matcher": "toBeVisible"}}, {"action": "expect", "selector": "input[type=\"password\"]", "assertion": {"matcher": "toBeVisible"}}, {"action": "expect", "role": "button", "text": "Login", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 2.2: Empty form validation", "tags": ["@auth", "@validation"], "steps": [{"action": "navigate", "url": "/login"}, {"action": "click", "role": "button", "text": "Login"}, {"action": "wait", "timeout": 500}, {"action": "expect", "selector": "input[type=\"password\"]", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 2.3: Login success", "tags": ["@critical", "@auth"], "timeout": 10000, "steps": [{"action": "navigate", "url": "/login"}, {"action": "fill", "selector": "input[type=\"email\"]", "value": "testuser@metabuilder.dev"}, {"action": "fill", "selector": "input[type=\"password\"]", "value": "TestPassword123!"}, {"action": "click", "role": "button", "text": "Login"}, {"action": "waitForNavigation"}, {"action": "expect", "assertion": {"matcher": "toHaveURL", "not": true, "expected": "**/login"}}]},
    {"name": "Flow 2.4: Session persists", "tags": ["@critical", "@auth"], "timeout": 10000, "steps": [{"action": "navigate", "url": "/login"}, {"action": "fill", "selector": "input[type=\"email\"]", "value": "testuser@metabuilder.dev"}, {"action": "fill", "selector": "input[type=\"password\"]", "value": "TestPassword123!"}, {"action": "click", "role": "button", "text": "Login"}, {"action": "wait", "timeout": 2000}, {"action": "evaluate", "script": "window.location.reload();"}, {"action": "waitForLoadState", "state": "networkidle"}, {"action": "expect", "assertion": {"matcher": "toHaveURL", "not": true, "expected": "**/login"}}]},
    {"name": "Flow 3.1: Dashboard loads", "tags": ["@critical", "@user"], "timeout": 10000, "steps": [{"action": "navigate", "url": "/dashboard"}, {"action": "waitForLoadState", "state": "domcontentloaded"}, {"action": "expect", "role": "heading", "text": "Dashboard", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 3.2: Packages section", "tags": ["@critical", "@packages"], "steps": [{"action": "navigate", "url": "/dashboard"}, {"action": "waitForLoadState", "state": "networkidle"}, {"action": "expect", "testId": "packages-section", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 3.3: Navigation menu", "tags": ["@navigation", "@user"], "steps": [{"action": "navigate", "url": "/dashboard"}, {"action": "waitForLoadState", "state": "domcontentloaded"}, {"action": "expect", "role": "navigation", "assertion": {"matcher": "toBeVisible"}}, {"action": "expect", "role": "button", "text": "Logout", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 4.1: Admin users page", "tags": ["@admin", "@critical"], "timeout": 10000, "steps": [{"action": "navigate", "url": "/admin/users"}, {"action": "waitForLoadState", "state": "domcontentloaded"}, {"action": "expect", "role": "heading", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 4.2: User list", "tags": ["@admin", "@list"], "steps": [{"action": "navigate", "url": "/admin/users"}, {"action": "waitForLoadState", "state": "networkidle"}, {"action": "expect", "selector": "table, [data-testid=\"user-list\"]", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 4.3: Role management", "tags": ["@admin", "@roles"], "steps": [{"action": "navigate", "url": "/admin/roles"}, {"action": "waitForLoadState", "state": "domcontentloaded"}, {"action": "expect", "role": "heading", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 5.1: Package manager", "tags": ["@admin", "@packages"], "steps": [{"action": "navigate", "url": "/admin/packages"}, {"action": "waitForLoadState", "state": "domcontentloaded"}, {"action": "expect", "role": "heading", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 5.2: Packages list", "tags": ["@admin", "@packages"], "steps": [{"action": "navigate", "url": "/admin/packages"}, {"action": "waitForLoadState", "state": "networkidle"}, {"action": "expect", "testId": "packages-list", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 5.3: Package controls", "tags": ["@admin", "@packages"], "steps": [{"action": "navigate", "url": "/admin/packages"}, {"action": "waitForLoadState", "state": "networkidle"}, {"action": "expect", "role": "button", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 6.1: Header navigation", "tags": ["@smoke", "@navigation"], "steps": [{"action": "navigate", "url": "/"}, {"action": "waitForLoadState", "state": "domcontentloaded"}, {"action": "expect", "role": "heading", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 6.2: Footer", "tags": ["@smoke", "@navigation"], "steps": [{"action": "navigate", "url": "/"}, {"action": "waitForLoadState", "state": "networkidle"}, {"action": "evaluate", "script": "window.scrollTo(0, document.body.scrollHeight);"}, {"action": "expect", "role": "contentinfo", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 6.3: Mobile responsive", "tags": ["@responsive", "@mobile"], "steps": [{"action": "evaluate", "script": "window.resizeTo(375, 667);"}, {"action": "navigate", "url": "/"}, {"action": "waitForLoadState", "state": "domcontentloaded"}, {"action": "expect", "role": "navigation", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 7.1: 404 page", "tags": ["@error-handling"], "steps": [{"action": "navigate", "url": "/invalid-route-xyz-12345"}, {"action": "waitForLoadState", "state": "domcontentloaded"}, {"action": "expect", "role": "main", "assertion": {"matcher": "toBeVisible"}}]},
    {"name": "Flow 7.2: Page load time", "tags": ["@performance", "@critical"], "timeout": 6000, "steps": [{"action": "navigate", "url": "/"}, {"action": "waitForLoadState", "state": "networkidle"}, {"action": "expect", "role": "main", "assertion": {"matcher": "toBeVisible"}}]}
  ]
}
