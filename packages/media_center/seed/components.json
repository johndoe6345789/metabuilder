{
  "components": [
    {
      "id": "MediaDashboard",
      "type": "container",
      "props": {
        "sx": {
          "display": "flex",
          "flexDirection": "column",
          "gap": 3,
          "p": 3
        }
      },
      "children": [
        {
          "type": "typography",
          "props": {
            "variant": "h4",
            "gutterBottom": true
          },
          "children": "Media Center"
        },
        {
          "type": "grid",
          "props": {
            "container": true,
            "spacing": 3
          },
          "children": [
            {
              "type": "grid",
              "props": { "item": true, "xs": 12, "md": 4 },
              "children": [
                {
                  "type": "card",
                  "children": [
                    {
                      "type": "cardContent",
                      "children": [
                        {
                          "type": "box",
                          "props": {
                            "sx": { "display": "flex", "alignItems": "center", "gap": 2 }
                          },
                          "children": [
                            {
                              "type": "icon",
                              "props": { "name": "Queue", "color": "primary" }
                            },
                            {
                              "type": "typography",
                              "props": { "variant": "h6" },
                              "children": "Job Queue"
                            }
                          ]
                        },
                        {
                          "type": "typography",
                          "props": { "variant": "h3", "color": "primary" },
                          "children": "{{stats.pending_jobs}}"
                        },
                        {
                          "type": "typography",
                          "props": { "variant": "body2", "color": "text.secondary" },
                          "children": "Pending jobs"
                        },
                        {
                          "type": "linearProgress",
                          "props": {
                            "variant": "determinate",
                            "value": "{{stats.queue_utilization}}",
                            "sx": { "mt": 2 }
                          }
                        }
                      ]
                    },
                    {
                      "type": "cardActions",
                      "children": [
                        {
                          "type": "button",
                          "props": { "size": "small" },
                          "events": { "onClick": "navigateTo('/media/jobs')" },
                          "children": "View All Jobs"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "grid",
              "props": { "item": true, "xs": 12, "md": 4 },
              "children": [
                {
                  "type": "card",
                  "children": [
                    {
                      "type": "cardContent",
                      "children": [
                        {
                          "type": "box",
                          "props": {
                            "sx": { "display": "flex", "alignItems": "center", "gap": 2 }
                          },
                          "children": [
                            {
                              "type": "icon",
                              "props": { "name": "Radio", "color": "secondary" }
                            },
                            {
                              "type": "typography",
                              "props": { "variant": "h6" },
                              "children": "Radio"
                            }
                          ]
                        },
                        {
                          "type": "typography",
                          "props": { "variant": "h3", "color": "secondary" },
                          "children": "{{stats.radio_live}}"
                        },
                        {
                          "type": "typography",
                          "props": { "variant": "body2", "color": "text.secondary" },
                          "children": "Live channels • {{stats.radio_listeners}} listeners"
                        }
                      ]
                    },
                    {
                      "type": "cardActions",
                      "children": [
                        {
                          "type": "button",
                          "props": { "size": "small" },
                          "events": { "onClick": "navigateTo('/media/radio')" },
                          "children": "Manage Radio"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "grid",
              "props": { "item": true, "xs": 12, "md": 4 },
              "children": [
                {
                  "type": "card",
                  "children": [
                    {
                      "type": "cardContent",
                      "children": [
                        {
                          "type": "box",
                          "props": {
                            "sx": { "display": "flex", "alignItems": "center", "gap": 2 }
                          },
                          "children": [
                            {
                              "type": "icon",
                              "props": { "name": "Tv", "color": "success" }
                            },
                            {
                              "type": "typography",
                              "props": { "variant": "h6" },
                              "children": "TV Channels"
                            }
                          ]
                        },
                        {
                          "type": "typography",
                          "props": { "variant": "h3", "color": "success.main" },
                          "children": "{{stats.tv_live}}"
                        },
                        {
                          "type": "typography",
                          "props": { "variant": "body2", "color": "text.secondary" },
                          "children": "Live channels • {{stats.tv_viewers}} viewers"
                        }
                      ]
                    },
                    {
                      "type": "cardActions",
                      "children": [
                        {
                          "type": "button",
                          "props": { "size": "small" },
                          "events": { "onClick": "navigateTo('/media/tv')" },
                          "children": "Manage TV"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "typography",
          "props": { "variant": "h5", "sx": { "mt": 2 } },
          "children": "Recent Jobs"
        },
        {
          "type": "component",
          "props": { "name": "JobQueueTable", "limit": 5 }
        }
      ]
    },
    {
      "id": "JobQueueTable",
      "type": "dataTable",
      "props": {
        "dataSource": "media_api.list_jobs",
        "columns": [
          { "field": "id", "headerName": "Job ID", "width": 120 },
          { "field": "type", "headerName": "Type", "width": 150 },
          { 
            "field": "status", 
            "headerName": "Status", 
            "width": 120,
            "renderCell": "StatusChip"
          },
          { 
            "field": "progress", 
            "headerName": "Progress", 
            "width": 150,
            "renderCell": "ProgressBar"
          },
          { "field": "created_at", "headerName": "Created", "width": 180, "type": "datetime" },
          {
            "field": "actions",
            "headerName": "Actions",
            "width": 150,
            "renderCell": "JobActions"
          }
        ],
        "pagination": true,
        "pageSize": 10,
        "autoRefresh": true,
        "refreshInterval": 5000
      }
    },
    {
      "id": "RadioChannelCard",
      "type": "card",
      "props": {
        "sx": { "height": "100%" }
      },
      "children": [
        {
          "type": "cardMedia",
          "props": {
            "component": "img",
            "height": 140,
            "image": "{{channel.artwork_url}}",
            "alt": "{{channel.name}}"
          }
        },
        {
          "type": "cardContent",
          "children": [
            {
              "type": "box",
              "props": {
                "sx": { "display": "flex", "justifyContent": "space-between", "alignItems": "center" }
              },
              "children": [
                {
                  "type": "typography",
                  "props": { "variant": "h6" },
                  "children": "{{channel.name}}"
                },
                {
                  "type": "chip",
                  "props": {
                    "label": "{{channel.is_live ? 'LIVE' : 'Offline'}}",
                    "color": "{{channel.is_live ? 'error' : 'default'}}",
                    "size": "small"
                  }
                }
              ]
            },
            {
              "type": "typography",
              "props": { "variant": "body2", "color": "text.secondary" },
              "children": "{{channel.description}}"
            },
            {
              "type": "box",
              "props": { "sx": { "mt": 2, "display": "flex", "gap": 1, "alignItems": "center" } },
              "condition": "channel.is_live",
              "children": [
                {
                  "type": "icon",
                  "props": { "name": "People", "fontSize": "small" }
                },
                {
                  "type": "typography",
                  "props": { "variant": "caption" },
                  "children": "{{channel.listener_count}} listeners"
                }
              ]
            },
            {
              "type": "box",
              "props": { "sx": { "mt": 1 } },
              "condition": "channel.is_live && channel.now_playing",
              "children": [
                {
                  "type": "typography",
                  "props": { "variant": "caption", "color": "text.secondary" },
                  "children": "Now Playing:"
                },
                {
                  "type": "typography",
                  "props": { "variant": "body2", "fontWeight": "bold" },
                  "children": "{{channel.now_playing.title}}"
                },
                {
                  "type": "typography",
                  "props": { "variant": "caption" },
                  "children": "{{channel.now_playing.artist}}"
                }
              ]
            }
          ]
        },
        {
          "type": "cardActions",
          "children": [
            {
              "type": "iconButton",
              "props": { "color": "primary" },
              "events": { "onClick": "radio_helpers.toggle_play(channel.id)" },
              "children": [
                {
                  "type": "icon",
                  "props": { "name": "{{channel.is_live ? 'Stop' : 'PlayArrow'}}" }
                }
              ]
            },
            {
              "type": "iconButton",
              "events": { "onClick": "openDialog('RadioChannelEditor', { channel: channel })" },
              "children": [
                {
                  "type": "icon",
                  "props": { "name": "Edit" }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "TvChannelCard",
      "type": "card",
      "props": {
        "sx": { "height": "100%" }
      },
      "children": [
        {
          "type": "cardMedia",
          "props": {
            "component": "img",
            "height": 140,
            "image": "{{channel.logo_url}}",
            "alt": "{{channel.name}}"
          }
        },
        {
          "type": "cardContent",
          "children": [
            {
              "type": "box",
              "props": {
                "sx": { "display": "flex", "justifyContent": "space-between", "alignItems": "center" }
              },
              "children": [
                {
                  "type": "box",
                  "children": [
                    {
                      "type": "chip",
                      "props": {
                        "label": "CH {{channel.channel_number}}",
                        "size": "small",
                        "sx": { "mr": 1 }
                      }
                    },
                    {
                      "type": "typography",
                      "props": { "variant": "h6", "component": "span" },
                      "children": "{{channel.name}}"
                    }
                  ]
                },
                {
                  "type": "chip",
                  "props": {
                    "label": "{{channel.is_live ? 'LIVE' : 'Offline'}}",
                    "color": "{{channel.is_live ? 'error' : 'default'}}",
                    "size": "small"
                  }
                }
              ]
            },
            {
              "type": "box",
              "props": { "sx": { "mt": 2, "display": "flex", "gap": 1, "alignItems": "center" } },
              "condition": "channel.is_live",
              "children": [
                {
                  "type": "icon",
                  "props": { "name": "Visibility", "fontSize": "small" }
                },
                {
                  "type": "typography",
                  "props": { "variant": "caption" },
                  "children": "{{channel.viewer_count}} viewers"
                }
              ]
            },
            {
              "type": "box",
              "props": { "sx": { "mt": 1 } },
              "condition": "channel.is_live && channel.now_playing",
              "children": [
                {
                  "type": "typography",
                  "props": { "variant": "caption", "color": "text.secondary" },
                  "children": "Now Playing:"
                },
                {
                  "type": "typography",
                  "props": { "variant": "body2", "fontWeight": "bold" },
                  "children": "{{channel.now_playing.title}}"
                }
              ]
            }
          ]
        },
        {
          "type": "cardActions",
          "children": [
            {
              "type": "iconButton",
              "props": { "color": "primary" },
              "events": { "onClick": "tv_helpers.toggle_channel(channel.id)" },
              "children": [
                {
                  "type": "icon",
                  "props": { "name": "{{channel.is_live ? 'Stop' : 'PlayArrow'}}" }
                }
              ]
            },
            {
              "type": "iconButton",
              "events": { "onClick": "navigateTo('/media/tv/' + channel.id + '/schedule')" },
              "children": [
                {
                  "type": "icon",
                  "props": { "name": "Schedule" }
                }
              ]
            },
            {
              "type": "iconButton",
              "events": { "onClick": "openDialog('TvChannelEditor', { channel: channel })" },
              "children": [
                {
                  "type": "icon",
                  "props": { "name": "Edit" }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "DocumentConverter",
      "type": "card",
      "props": {
        "sx": { "maxWidth": 600, "mx": "auto", "mt": 3 }
      },
      "children": [
        {
          "type": "cardContent",
          "children": [
            {
              "type": "typography",
              "props": { "variant": "h5", "gutterBottom": true },
              "children": "Document Converter"
            },
            {
              "type": "typography",
              "props": { "variant": "body2", "color": "text.secondary", "paragraph": true },
              "children": "Convert Markdown, HTML, and other documents to PDF, DOCX, EPUB, and more."
            },
            {
              "type": "box",
              "props": { "component": "form", "sx": { "display": "flex", "flexDirection": "column", "gap": 2 } },
              "children": [
                {
                  "type": "textField",
                  "props": {
                    "label": "Input File",
                    "placeholder": "/path/to/document.md",
                    "fullWidth": true,
                    "required": true
                  },
                  "binding": "form.input_path"
                },
                {
                  "type": "grid",
                  "props": { "container": true, "spacing": 2 },
                  "children": [
                    {
                      "type": "grid",
                      "props": { "item": true, "xs": 6 },
                      "children": [
                        {
                          "type": "select",
                          "props": {
                            "label": "Input Format",
                            "fullWidth": true,
                            "options": [
                              { "value": "markdown", "label": "Markdown" },
                              { "value": "html", "label": "HTML" },
                              { "value": "docx", "label": "Word (DOCX)" },
                              { "value": "latex", "label": "LaTeX" },
                              { "value": "rst", "label": "reStructuredText" },
                              { "value": "org", "label": "Org-mode" }
                            ]
                          },
                          "binding": "form.input_format"
                        }
                      ]
                    },
                    {
                      "type": "grid",
                      "props": { "item": true, "xs": 6 },
                      "children": [
                        {
                          "type": "select",
                          "props": {
                            "label": "Output Format",
                            "fullWidth": true,
                            "options": [
                              { "value": "pdf", "label": "PDF" },
                              { "value": "html", "label": "HTML" },
                              { "value": "docx", "label": "Word (DOCX)" },
                              { "value": "epub", "label": "EPUB" },
                              { "value": "odt", "label": "OpenDocument" },
                              { "value": "latex", "label": "LaTeX" }
                            ]
                          },
                          "binding": "form.output_format"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "textField",
                  "props": {
                    "label": "Output Path (optional)",
                    "placeholder": "Auto-generated if empty",
                    "fullWidth": true
                  },
                  "binding": "form.output_path"
                },
                {
                  "type": "accordion",
                  "children": [
                    {
                      "type": "accordionSummary",
                      "props": { "expandIcon": "ExpandMore" },
                      "children": [
                        {
                          "type": "typography",
                          "children": "Advanced Options"
                        }
                      ]
                    },
                    {
                      "type": "accordionDetails",
                      "children": [
                        {
                          "type": "box",
                          "props": { "sx": { "display": "flex", "flexDirection": "column", "gap": 2 } },
                          "children": [
                            {
                              "type": "textField",
                              "props": { "label": "Document Title", "fullWidth": true },
                              "binding": "form.title"
                            },
                            {
                              "type": "textField",
                              "props": { "label": "Author", "fullWidth": true },
                              "binding": "form.author"
                            },
                            {
                              "type": "formControlLabel",
                              "props": {
                                "label": "Include Table of Contents",
                                "control": { "type": "checkbox" }
                              },
                              "binding": "form.toc"
                            },
                            {
                              "type": "grid",
                              "props": { "container": true, "spacing": 2 },
                              "children": [
                                {
                                  "type": "grid",
                                  "props": { "item": true, "xs": 6 },
                                  "children": [
                                    {
                                      "type": "select",
                                      "props": {
                                        "label": "Paper Size",
                                        "fullWidth": true,
                                        "options": [
                                          { "value": "a4", "label": "A4" },
                                          { "value": "letter", "label": "Letter" },
                                          { "value": "legal", "label": "Legal" }
                                        ]
                                      },
                                      "binding": "form.paper_size"
                                    }
                                  ]
                                },
                                {
                                  "type": "grid",
                                  "props": { "item": true, "xs": 6 },
                                  "children": [
                                    {
                                      "type": "textField",
                                      "props": { "label": "Margin", "placeholder": "1in", "fullWidth": true },
                                      "binding": "form.margin"
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "select",
                              "props": {
                                "label": "Code Highlight Style",
                                "fullWidth": true,
                                "options": [
                                  { "value": "tango", "label": "Tango" },
                                  { "value": "pygments", "label": "Pygments" },
                                  { "value": "kate", "label": "Kate" },
                                  { "value": "monochrome", "label": "Monochrome" },
                                  { "value": "espresso", "label": "Espresso" },
                                  { "value": "zenburn", "label": "Zenburn" }
                                ]
                              },
                              "binding": "form.highlight_style"
                            },
                            {
                              "type": "textField",
                              "props": { "label": "Custom Template Path", "fullWidth": true },
                              "binding": "form.template"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "button",
                  "props": {
                    "variant": "contained",
                    "color": "primary",
                    "size": "large",
                    "fullWidth": true,
                    "startIcon": { "type": "icon", "props": { "name": "Transform" } }
                  },
                  "events": {
                    "onClick": "document_helpers.convert(form.input_path, form.output_format, form)"
                  },
                  "children": "Convert Document"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "QuickConvertButtons",
      "type": "box",
      "props": { "sx": { "display": "flex", "gap": 2, "flexWrap": "wrap" } },
      "children": [
        {
          "type": "button",
          "props": {
            "variant": "outlined",
            "startIcon": { "type": "icon", "props": { "name": "PictureAsPdf" } }
          },
          "events": { "onClick": "openDialog('DocumentConverter', { output_format: 'pdf' })" },
          "children": "Markdown → PDF"
        },
        {
          "type": "button",
          "props": {
            "variant": "outlined",
            "startIcon": { "type": "icon", "props": { "name": "Code" } }
          },
          "events": { "onClick": "openDialog('DocumentConverter', { output_format: 'html' })" },
          "children": "Markdown → HTML"
        },
        {
          "type": "button",
          "props": {
            "variant": "outlined",
            "startIcon": { "type": "icon", "props": { "name": "Article" } }
          },
          "events": { "onClick": "openDialog('DocumentConverter', { output_format: 'docx' })" },
          "children": "Markdown → DOCX"
        },
        {
          "type": "button",
          "props": {
            "variant": "outlined",
            "startIcon": { "type": "icon", "props": { "name": "MenuBook" } }
          },
          "events": { "onClick": "openDialog('DocumentConverter', { output_format: 'epub' })" },
          "children": "Markdown → EPUB"
        }
      ]
    }
  ]
}
