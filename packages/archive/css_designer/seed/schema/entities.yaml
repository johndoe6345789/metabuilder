# CSS Designer Schema Definitions
# Package: css_designer
# Version: 1.0.0

entities:
  - name: Theme
    description: Theme definition with CSS variables
    fields:
      - name: id
        type: String
        required: true
        primary: true
      - name: tenantId
        type: String
        required: true
      - name: name
        type: String
        required: true
      - name: baseTheme
        type: String
        required: false
        description: Parent theme (light, dark, or theme ID)
      - name: variables
        type: Json
        required: true
        description: CSS variable definitions
      - name: metadata
        type: Json
        required: false
      - name: isActive
        type: Boolean
        required: true
        default: true
      - name: version
        type: Int
        required: true
        default: 1
      - name: createdAt
        type: DateTime
        required: true
      - name: updatedAt
        type: DateTime
        required: true
    indexes:
      - name: theme_tenant_name_idx
        fields: [tenantId, name]
        unique: true
    acl:
      create: [moderator, admin]
      read: [user, admin]
      update: [moderator, admin]
      delete: [admin]

  - name: StyleComponent
    description: Reusable style component definition
    fields:
      - name: id
        type: String
        required: true
        primary: true
      - name: tenantId
        type: String
        required: true
      - name: themeId
        type: String
        required: false
        description: Associated theme (null for global)
      - name: name
        type: String
        required: true
      - name: selector
        type: String
        required: true
        description: CSS selector
      - name: styles
        type: Json
        required: true
        description: CSS property-value pairs
      - name: variants
        type: Json
        required: false
        description: Pseudo-class/state variants
      - name: createdAt
        type: DateTime
        required: true
      - name: updatedAt
        type: DateTime
        required: true
    indexes:
      - name: style_tenant_theme_idx
        fields: [tenantId, themeId]
      - name: style_tenant_name_idx
        fields: [tenantId, name]
    relations:
      - name: theme
        type: belongsTo
        target: Theme
        foreignKey: themeId
    acl:
      create: [moderator, admin]
      read: [user, admin]
      update: [moderator, admin]
      delete: [admin]

  - name: ThemePreset
    description: Saved theme preset for quick application
    fields:
      - name: id
        type: String
        required: true
        primary: true
      - name: tenantId
        type: String
        required: true
      - name: name
        type: String
        required: true
      - name: description
        type: String
        required: false
      - name: variables
        type: Json
        required: true
      - name: baseTheme
        type: String
        required: false
      - name: createdAt
        type: DateTime
        required: true
    indexes:
      - name: preset_tenant_name_idx
        fields: [tenantId, name]
        unique: true
    acl:
      create: [moderator, admin]
      read: [user, admin]
      update: [admin]
      delete: [admin]
